import{r as _,d as w,o as x,e as k,a as o,c as a,b as e,w as B,v as b,F as S,f as C,g as I,h as L,n as M,t as l,u as v,i as N,p as V,j}from"./index-akgLfukJ.js";import{u as D}from"./reviewStore-BVcE4FyF.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const F="/btest/assets/search_img-DXhpoHdB.png",u=r=>(V("data-v-dd05dabd"),r=r(),j(),r),R={class:"secBox"},z={class:"searchBox"},G=u(()=>e("img",{src:F,alt:"#"},null,-1)),H=u(()=>e("span",{class:"mdi mdi-magnify"},null,-1)),Q={id:"movieBoxSet"},T={key:0},U={key:1},X={class:"movieBox"},$=u(()=>e("span",null,"release date",-1)),q=u(()=>e("span",null,"running time",-1)),A={key:0,class:"reviewBadge"},J={__name:"index",setup(r){const n=_([]),d=_(""),p=_(!0),f=D(),{reviewCounts:m,fetchReviewCount:g}=f,y=async()=>{try{const c=await(await fetch("https://ghibliapi.vercel.app/films")).json();n.value=c.map(s=>({id:s.id,title:s.title,image:s.image,release_date:s.release_date,running_time:s.running_time})),console.log("Fetched movies:",n.value),n.value.forEach(s=>{g(s.id)})}catch(i){console.error("Error fetching movies:",i)}finally{p.value=!1}},h=w(()=>d.value?n.value.filter(i=>i.title.toLowerCase().includes(d.value.toLowerCase())):n.value);return x(()=>{y()}),(i,c)=>{const s=k("router-link");return o(),a("div",R,[e("div",z,[G,e("div",null,[B(e("input",{"onUpdate:modelValue":c[0]||(c[0]=t=>d.value=t),type:"text",autocomplete:"off",spellcheck:"false",placeholder:"Search by movie title"},null,512),[[b,d.value]]),H])]),e("div",Q,[p.value?(o(),a("span",T,"Loading movies...")):h.value.length?(o(!0),a(S,{key:2},C(h.value,t=>(o(),a("div",{key:t.id},[I(s,{to:`/movie/${t.id}`},{default:L(()=>[e("div",X,[e("div",{class:"movieInfo",style:M({backgroundImage:"url("+t.image+")"})},[e("div",null,l(t.title),1),e("div",null,[e("div",null,[$,e("span",null,l(t.release_date),1)]),e("div",null,[q,e("span",null,l(t.running_time)+" min",1)])]),v(m)[t.id]?(o(),a("span",A,l(v(m)[t.id]),1)):N("",!0)],4),e("h2",null,l(t.title),1)])]),_:2},1032,["to"])]))),128)):(o(),a("span",U,"No search results..."))])])}}},W=E(J,[["__scopeId","data-v-dd05dabd"]]);export{W as default};
